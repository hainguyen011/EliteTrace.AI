<!DOCTYPE html>
<html lang="vi">

<head>
  <meta charset="utf-8" />
  <title>EliteTrace AI</title>
  <link rel="stylesheet" href="styles.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
</head>

<body>
  <div class="header">
    <div class="brand-wrapper">
      <div class="header-logo">
        <img src="../../icons/icon.png" alt="Logo">
      </div>
      <div class="header-title">EliteTrace AI</div>
    </div>
    <div id="siteBadge" class="site-badge" style="display: none;">
      <span class="pulse-indicator"></span>
      <span id="siteStatusText">Phân tích...</span>
    </div>
    <button id="themeToggle" class="btn-icon" title="Đổi giao diện" style="width: 32px; height: 32px;">
      <svg class="moon-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
        stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display: block;">
        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
      </svg>
      <svg class="sun-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
        stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display: none;">
        <circle cx="12" cy="12" r="5"></circle>
        <line x1="12" y1="1" x2="12" y2="3"></line>
        <line x1="12" y1="21" x2="12" y2="23"></line>
        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
        <line x1="1" y1="12" x2="3" y2="12"></line>
        <line x1="21" y1="12" x2="23" y2="12"></line>
        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
      </svg>
    </button>
  </div>

  <div class="input-section">
    <div class="input-container">
      <input id="apikey" type="password" placeholder="Nhập khóa API Gemini..." />
      <button id="saveKey" class="btn-small">Lưu</button>
    </div>
  </div>

  <div class="tabs-container">
    <div class="tab-indicator"></div>
    <button class="tab-btn active" data-tab="overview">Tổng quan</button>
    <button class="tab-btn" data-tab="analysis">Chi tiết</button>
    <button class="tab-btn" data-tab="history">Lịch sử</button>
  </div>

  <div id="scoreDisplay" class="score-section" style="display: none;">
    <svg class="gauge-svg" width="120" height="120" viewBox="0 0 120 120">
      <circle class="gauge-bg" cx="60" cy="60" r="52"></circle>
      <circle id="gaugeFill" class="gauge-fill" cx="60" cy="60" r="52" stroke-dasharray="326 326"
        stroke-dashoffset="326"></circle>
    </svg>
    <div class="gauge-content">
      <div id="scoreValue" class="gauge-value">--</div>
      <div id="scoreLabelText" class="gauge-label">TIN CẬY</div>
    </div>
  </div>

  <div id="result" class="result-container empty">
    <!-- Injected by JS -->
    <div class="empty-placeholder">
      <div class="placeholder-icon">
        <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
          <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
        </svg>
      </div>
      <span>Chọn văn bản trên trang để bắt đầu</span>
    </div>
  </div>

  <div id="historyView" class="history-container" style="display: none;">
    <div class="history-header">
      <span>Gần đây</span>
      <button id="clearHistory" class="btn-text">Xóa hết</button>
    </div>
    <div id="historyList" class="history-list">
      <!-- History Items -->
    </div>
  </div>

  <div class="controls-area">
    <button id="scan" class="btn-action btn-primary">
      <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
        <path d="M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8"></path>
        <path d="M21 3v5h-5"></path>
      </svg>
      Quét
    </button>
    <button id="visionScan" class="btn-action btn-secondary" title="Quét Hình Ảnh">
      <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"></path>
        <circle cx="12" cy="13" r="4"></circle>
      </svg>
    </button>
    <button id="reset" class="btn-action btn-secondary btn-icon" title="Đặt lại">
      <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"></path>
        <path d="M3 3v5h5"></path>
      </svg>
    </button>
  </div>

  <script src="../../libs/marked.min.js"></script>
  <script type="module" src="popup.js"></script>
</body>

</html>